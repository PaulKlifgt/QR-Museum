{% extends 'base.html' %}

{% block content %}
    <h2>–≠—Ç–æ –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</h2>
    <a href="/api/games/">–ú–∏–Ω–∏-–∏–≥—Ä—ã</a>
    <hr>
    <span style="font-size: larger;">üîç</span> <input type="text" name="" id="inp">
    <br><br>
    <div class="need-upd">
        {% for sec in sections %}
            <details id="new-details-content">
                <summary class="rr"><span class="s">{{sec.name}}</span><a href="/api/edit/sec/{{sec.id}}" style="font-size: larger;" title="–ò–∑–º–µ–Ω–∏—Ç—å —Ä–∞–∑–¥–µ–ª"> ‚úèÔ∏è </a> </summary> 

                {% if sections[sec] %}
                    {% for exh in sections[sec] %}
                        <li class="rr"><span class="s">{{exh.name}}</span><a href="/api/edit/exh/{{exh.id}}" style="font-size: larger;" title="–ò–∑–º–µ–Ω–∏—Ç—å —ç–∫—Å–ø–æ–Ω–∞—Ç"> ‚úèÔ∏è     </a>   <a href="/api/qr/{{exh.id}}/" style="font-size: larger; color: black; text-decoration: underline;" title="—Å–∫–∞—á–∞—Ç—å QR-code —ç–∫—Å–ø–æ–Ω–∞—Ç–∞">  QR </a></li> 
                    {% endfor %}
                {% else %}
                    <li>–¢—É—Ç –ø—É—Å—Ç–æ</li>
                {% endif %}
            
        
                
            </details>
        {% endfor %}
    </div>
    <div id="question">
        <h2><a onclick="document.getElementById('question').style.display='none'">‚ùå</a></h2>
        <h3>–í—ã —Ö–æ—Ç–∏—Ç–µ —Å–æ–∑–¥–∞—Ç—å:</h3>
        <div>
            <a href="/api/create/exh/"><button class="btn btn-primary">–≠–∫—Å–ø–æ–Ω–∞—Ç</button></a> 
            <a href="/api/create/sec/"><button class="btn btn-primary" style="margin-right: 10px;">–†–∞–∑–¥–µ–ª</button></a>
        </div>
       
    </div>
    <br>
    <a onclick="document.getElementById('question').style.display='block'">‚ûï –ù–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª/—ç–∫—Å–ø–æ–Ω–∞—Ç</a>
    <script>
        var inp = document.getElementById("inp");
        var list_det = document.getElementsByClassName('need-upd')[0].getElementsByTagName('details');
        
        inp.oninput = function (){

            for (let i = 0; i < list_det.length; i++) {
                if (inp.value != '') {
                    console.log('open');
                    list_det[i].setAttribute('open', true);
                }
                else {
                    list_det[i].removeAttribute('open');
                }
                
                var list_rr = list_det[i].getElementsByClassName('rr')
                for (let j = 0; j < list_rr.length; j++) {

                    if (!list_rr[j].getElementsByClassName('s')[0].textContent.toLowerCase().includes(inp.value.toLowerCase())) {
                        $(list_rr[j]).hide();
                    }
                    else{
                        $(list_rr[j]).show();
                    }
                }
            }
        }
    </script>
{% endblock content %}